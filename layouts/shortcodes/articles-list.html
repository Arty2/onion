{{- $types := (.Get "types") -}}
{{- $tag := (.Get "tag") -}}
{{- $filter := (.Get "filter") -}}
{{- $id := (.Get "id") -}}
{{- $class := (.Get "class") -}}
{{- $title := (.Get "title") -}}
{{- $closed := (.Get "closed") -}}
{{- $articles := where (where .Site.AllPages ".IsPage" true) ".Lang" "eq" .Site.Language.Lang -}}
{{- $articles := $articles | union (where .Site.AllPages ".Params.crosspost" true) -}}
{{- $articles := union (where $articles ".Type" "in" $types) (where $articles ".Params.tags" "intersect" (slice $tag)) -}}
{{- $articles := $articles | symdiff (where $articles ".Params.tags" "intersect" (slice $filter)) -}}
{{- $articles_count := len $articles -}}
{{- if gt $articles_count 0 -}}
<details id="{{ with $id }}{{ . }}{{ end }}" class="articles-list {{ with $class }}{{ . }}{{ end }}" {{ if ne $closed "true" }}open{{ end }}>
<summary><h2>{{ $title }} ({{ $articles_count }})</h2></summary>
<div class="wrapper">
{{- range $articles.ByDate.Reverse -}}
			{{ partial "article.html" . }}
{{- end -}}
</div>
</details>
{{- end -}}